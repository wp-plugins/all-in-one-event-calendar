(function(a){a.fn.extend({geo_autocomplete:function(c,b){options=a.extend({},a.Autocompleter.defaults,{geocoder:c,mapwidth:100,mapheight:100,maptype:"terrain",mapkey:"ABQIAAAAbnvDoAoYOSW2iqoXiGTpYBT2yXp_ZAY8_ufC3CFXhHIE1NvwkxQNumU68AwGqjbSNF9YO8NokKst8w",mapsensor:false,parse:function(d,f,e){var g=[];if(d&&f&&f=="OK"){a.each(d,function(j,i){if(i.geometry&&i.geometry.viewport){var h=i.formatted_address.split(",");var k=h[0];a.each(h,function(m,l){if(l.toLowerCase().indexOf(e.toLowerCase())!=-1){k=a.trim(l);return false}});g.push({data:i,value:k,result:k})}})}return g},formatItem:function(f,h,e,d){var i="http://maps.google.com/maps/api/staticmap?visible="+f.geometry.viewport.getSouthWest().toUrlValue()+"|"+f.geometry.viewport.getNorthEast().toUrlValue()+"&size="+options.mapwidth+"x"+options.mapheight+"&maptype="+options.maptype+"&key="+options.mapkey+"&sensor="+(options.mapsensor?"true":"false");var g=f.formatted_address.replace(/,/gi,",<br/>");return'<img src="'+i+'" width="'+options.mapwidth+'" height="'+options.mapheight+'" /> '+g+'<br clear="both"/>'}},b);options.highlight=options.highlight||function(d){return d};options.formatMatch=options.formatMatch||options.formatItem;return this.each(function(){new a.Autocompleter(this,options)})}})})(jQuery);