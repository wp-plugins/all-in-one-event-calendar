jQuery(function(f){if(f("#ai1ec_event").length){element_selector(".ai1ec_week_days_list > li","ai1ec_selected","ai1ec_weekday_value","#ai1ec_weekly_days");element_selector(".ai1ec_month_days_list > li","ai1ec_selected","ai1ec_monthday_value","#ai1ec_monthly_days");element_selector(".ai1ec_yearly_months_list > li","ai1ec_selected","ai1ec_yearmonth_value","#ai1ec_yearly_months");var a=new Date(ai1ec_add_new_event.now*1000);var g={allday:"#ai1ec_all_day_event",start_date_input:"#ai1ec_start-date-input",start_time_input:"#ai1ec_start-time-input",start_time:"#ai1ec_start-time",end_date_input:"#ai1ec_end-date-input",end_time_input:"#ai1ec_end-time-input",end_time:"#ai1ec_end-time",now:a};f.timespan(g);g={start_date_input:"#ai1ec_until-date-input",start_time:"#ai1ec_until-time",now:a};f.inputdate(g);f("#ai1ec_count").rangeinput({css:{input:"ai1ec-range",slider:"ai1ec-slider",progress:"ai1ec-progress",handle:"ai1ec-handle"}});var k=new google.maps.Geocoder();var j=new google.maps.LatLng(9.965,-83.327);var h={zoom:0,mapTypeId:google.maps.MapTypeId.ROADMAP,center:j};var e=new google.maps.Map(f("#ai1ec_map_canvas").get(0),h);var d=new google.maps.Marker({map:e});function l(w){e.setCenter(w.geometry.location);e.setZoom(15);d.setPosition(w.geometry.location);f("#ai1ec_address").val(w.formatted_address);var v="";var u="";var q="";var o="";var t=0;var p=0;for(var r=0;r<w.address_components.length;r++){switch(w.address_components[r].types[0]){case"street_number":v=w.address_components[r].long_name;break;case"route":u=w.address_components[r].long_name;break;case"locality":q=w.address_components[r].long_name;break;case"administrative_area_level_1":province=w.address_components[r].long_name;break;case"postal_code":t=w.address_components[r].long_name;break;case"country":p=w.address_components[r].long_name;break}}var s=v.length>0?v+" ":"";s+=u.length>0?u:"";t=t!=0?t:"";f("#ai1ec_city").val(q);f("#ai1ec_province").val(province);f("#ai1ec_postal_code").val(t);f("#ai1ec_country").val(p)}f("#ai1ec_address").geo_autocomplete(new google.maps.Geocoder,{selectFirst:false,minChars:3,cacheLength:50,width:300,scroll:true,scrollHeight:330}).result(function(o,p){if(p){l(p)}}).change(function(){if(f(this).val().length>0){var o=f(this).val();k.geocode({address:o},function(q,p){if(p==google.maps.GeocoderStatus.OK){l(q[0])}})}}).change();f("#ai1ec_google_map").click(function(){if(f(this).is(":checked")){f(".ai1ec_box_map").addClass("ai1ec_box_map_visible").hide().slideDown("fast")}else{f(".ai1ec_box_map").slideUp("fast")}});f("#ai1ec_repeat").change(function(){var o=f("#ai1ec_repeat option:selected").val();switch(o){case" ":i();break;default:c();break}});f("#ai1ec_end").change(m);function c(){f("#ai1ec_end_holder").fadeIn();m()}function i(){b();f("#ai1ec_end_holder").fadeOut()}function m(){var o=f("#ai1ec_end option:selected").val();switch(o){case"0":b();break;case"1":if(f("#ai1ec_count_holder").css("display")=="none"){b();f("#ai1ec_count_holder").fadeIn()}break;case"2":if(f("#ai1ec_until_holder").css("display")=="none"){b();f("#ai1ec_until_holder").fadeIn()}break}}function b(){f("#ai1ec_count_holder, #ai1ec_until_holder").hide()}if(f("#ai1ec_bottom_publish").length>0){f("#ai1ec_bottom_publish").click(function(){f("#publish").trigger("click")})}}if(f("#ai1ec_add_new_ics").length){f("#ai1ec_add_new_ics").click(function(){var q=f(this);var o=f("#ai1ec_feed_url");if(!n(o.val())){o.css("border-color","#FF0000").focus()}else{q.attr("disabled",true);o.css("border-color","#DFDFDF");var p={action:"ai1ec_add_ics",feed_url:o.val(),feed_category:f("#ai1ec_feed_category option:selected").val(),feed_tags:f("#ai1ec_feed_tags").val()};f.getJSON(ajaxurl,p,function(r){q.removeAttr("disabled");if(r.error){alert(r.message)}else{o.val("");f("#ai1ec-feeds-after").after(r.message)}})}});f(".ai1ec_delete_ics").live("click",function(){var r=f(this);r.attr("disabled",true);var q=r.closest(".ai1ec-feed-container");var p=r.siblings(".ai1ec_feed_id").val();var o={action:"ai1ec_delete_ics",ics_id:p};f.getJSON(ajaxurl,o,function(s){r.removeAttr("disabled");if(s.error){alert(s.message)}else{q.remove()}})});f(".ai1ec_flush_ics").live("click",function(){var q=f(this);q.attr("disabled",true);var p=q.siblings(".ai1ec_feed_id").val();q.siblings(".ajax-loading").css("visibility","visible");var o={action:"ai1ec_flush_ics",ics_id:p};f.getJSON(ajaxurl,o,function(r){if(r.error){alert(r.message)}else{q.fadeOut()}q.siblings(".ajax-loading").css("visibility","hidden")})});f(".ai1ec_update_ics").live("click",function(){var q=f(this);q.attr("disabled",true);var p=q.siblings(".ai1ec_feed_id").val();q.siblings(".ajax-loading").css("visibility","visible");var o={action:"ai1ec_update_ics",ics_id:p};f.getJSON(ajaxurl,o,function(r){if(r.error){alert(r.message)}else{q.siblings(".ai1ec_flush_ics").remove();if(r.count){q.after('<input type="button" class="button ai1ec_flush_ics" value="'+r.flush_label+'" />')}}q.attr("disabled",false).siblings(".ajax-loading").css("visibility","hidden")})});function n(o){var p=/(http|https|webcal):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return p.test(o)}}});